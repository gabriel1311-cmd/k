<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Karina de gabito</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Georgia', serif; overflow-x: hidden; min-height: 100vh; }
        .lock-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: #000; display: flex; justify-content: center; align-items: center; z-index: 9999; transition: opacity 1s ease-in-out; }
        .lock-screen.fade-out { opacity: 0; pointer-events: none; }
        .lock-container { text-align: center; }
        .ascii-art { color: #ff69b4; font-size: 1.2rem; font-family: 'Courier New', monospace; line-height: 1.4; animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { text-shadow: 0 0 10px #ff69b4, 0 0 20px #ff69b4; } to { text-shadow: 0 0 20px #ff69b4, 0 0 30px #ff1493; } }
        .password-input { padding: 0.8rem 1.5rem; font-size: 1rem; border: 2px solid #ff69b4; background: rgba(255, 255, 255, 0.1); color: #fff; border-radius: 25px; width: 300px; margin-bottom: 1rem; transition: all 0.3s; }
        .unlock-btn { padding: 0.8rem 2rem; font-size: 1rem; background: linear-gradient(45deg, #ff69b4, #ff1493); color: #fff; border: none; border-radius: 25px; cursor: pointer; margin: 0 auto; display: block; }
        .error-message { color: #ff69b4; margin-top: 1rem; font-size: 0.9rem; min-height: 1.5rem; }
        .main-content { min-height: 100vh; background: linear-gradient(135deg, #ffeef8, #ffe0f0, #ffd4e5); animation: gradientShift 10s ease infinite; opacity: 0; transition: opacity 1s; display: none; }
        .main-content.visible { opacity: 1; display: block; }
        @keyframes gradientShift { 0%, 100% { background: linear-gradient(135deg, #ffeef8, #ffe0f0, #ffd4e5); } 50% { background: linear-gradient(135deg, #ffd4e5, #ffeef8, #ffe0f0); } }
        .main-header { padding: 3rem 1rem 1rem; text-align: center; }
        .main-title { color: #d6336c; font-size: 2.5rem; animation: pulse 3s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        .header-info { color: #ff69b4; font-size: 1rem; margin-top: 1rem; font-weight: bold; }
        .hearts-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .floating-heart { position: absolute; animation: fall linear forwards; opacity: 0; will-change: transform, opacity; }
        @keyframes fall { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(110vh) rotate(360deg); opacity: 0; } }
        .poem-container { padding: 2rem 1rem; max-width: 800px; margin: 0 auto; position: relative; z-index: 2; }
        .poem-card { background: rgba(255, 255, 255, 0.9); border-radius: 20px; padding: 3rem; box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3); border: 3px solid #ffc0cb; animation: slideUp 1s ease forwards; opacity: 0; }
        .poem-card.fade-in { animation: fadeIn 0.5s ease forwards; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .poem-title { font-family: 'Georgia', serif; font-size: 1.8rem; color: #d6336c; text-align: center; margin-bottom: 2rem; }
        .poem-body { font-family: 'Brush Script MT', cursive; font-size: 1.5rem; color: #5d3a5a; font-style: italic; line-height: 2.2; text-align: center; white-space: pre-line; margin-bottom: 2rem; }
        .poem-info { text-align: center; color: #ff69b4; font-size: 1.1rem; }
        .main-footer { padding: 2rem; text-align: center; color: #d6336c; font-style: italic; position: relative; z-index: 2; }
        .history-btn { padding: 0.8rem 1.5rem; font-size: 1rem; background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; border: none; border-radius: 25px; cursor: pointer; box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3); }
        .reset-btn { padding: 0.6rem 1rem; font-size: 0.9rem; background: #ccc; color: #333; border: none; border-radius: 25px; cursor: pointer; margin-top: 1rem; display: none; }
        .history-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; justify-content: center; align-items: center; z-index: 10000; transition: opacity 0.3s ease; opacity: 0; pointer-events: none; }
        .history-modal.visible { opacity: 1; pointer-events: auto; }
        .history-modal-content { background: white; border-radius: 20px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); transform: translateY(-20px); transition: transform 0.3s ease, opacity 0.3s ease; opacity: 0; }
        .history-modal.visible .history-modal-content { transform: translateY(0); opacity: 1; }
        .history-header { background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; padding: 1.5rem; border-radius: 20px 20px 0 0; display: flex; justify-content: space-between; align-items: center; }
        .close-btn { background: none; border: none; color: white; font-size: 2rem; cursor: pointer; padding: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
        .history-content { padding: 2rem; }
        .history-navigation { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding: 1rem; background: #ffeef8; border-radius: 15px; }
        .nav-btn { padding: 0.6rem 1.2rem; background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; border: none; border-radius: 20px; cursor: pointer; }
        .nav-btn:disabled { background: #ccc; cursor: not-allowed; }
        .history-poem-display { background: #fff; border: 2px solid #ffc0cb; border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 5px 15px rgba(255, 105, 180, 0.2); }
        .poems-list { max-height: 200px; overflow-y: auto; border: 1px solid #ffc0cb; border-radius: 10px; padding: 1rem; }
        .poem-item { padding: 0.8rem; margin: 0.5rem 0; background: #ffeef8; border-radius: 8px; cursor: pointer; border-left: 4px solid #ff69b4; }
        .poem-item.current { background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; }
        @media screen and (max-width: 768px) {
            .password-input { width: 90%; max-width: 300px; }
            .main-title { font-size: 1.8rem; }
            .poem-card { padding: 2rem; margin: 0 1rem; }
            .poem-body { font-size: 1.2rem; line-height: 2; }
            .history-navigation { flex-direction: column; gap: 1rem; }
            .nav-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div id="lockScreen" class="lock-screen">
        <div class="lock-container">
            <pre class="ascii-art">
                  / \
                 | ‚ô° |
                  \ /
            </pre>
            <form id="unlockForm" class="unlock-form">
                <input type="password" id="passwordInput" class="password-input" placeholder="Ingresa la palabra m√°gica..." aria-label="Ingresa la palabra m√°gica" required>
                <button type="submit" class="unlock-btn" aria-label="Desbloquear p√°gina">DESBLOQUEAME!!</button>
                <p id="errorMessage" class="error-message" aria-live="polite"></p>
            </form>
        </div>
    </div>

    <main id="mainContent" class="main-content">
        <div id="heartsContainer" class="hearts-container" aria-hidden="true"></div>
        <header class="main-header">
            <h1 class="main-title">üíå Para mi Karina, con Amor Eterno üëë</h1>
            <div class="header-info">
                <span id="currentTime"></span> (Bogot√°, Colombia)
            </div>
            <div class="header-info" style="font-style: italic; margin-top: 0.5rem;">
                <span id="poemCounter"></span>
            </div>
            <div class="header-actions" style="margin-top: 1rem;">
                <button id="viewHistoryBtn" class="history-btn" aria-label="Ver poemas pasados">üìö Ver Poemas Pasados</button>
                <button id="resetProgressBtn" class="reset-btn" aria-label="Reiniciar progreso">Reiniciar Progreso</button>
            </div>
        </header>
        <section class="poem-container">
            <div id="poemCard" class="poem-card">
                <h2 id="currentPoemTitle" class="poem-title"></h2>
                <pre id="currentPoemBody" class="poem-body"></pre>
                <div class="poem-info">
                    <p>Poema <span id="poemNumber"></span></p>
                    <p>Fecha: <span id="poemDate"></span></p>
                </div>
            </div>
        </section>
        <footer class="main-footer">
            <p>"Dios nos uni√≥ con hilos de eternidad."</p>
        </footer>
        <div id="poemsHistoryModal" class="history-modal" role="dialog" aria-modal="true" aria-labelledby="historyModalTitle" aria-hidden="true">
            <div class="history-modal-content">
                <div class="history-header">
                    <h2 id="historyModalTitle">üìö Poemas Pasados</h2>
                    <button id="closeHistoryBtn" class="close-btn" aria-label="Cerrar modal">&times;</button>
                </div>
                <div class="history-content">
                    <div class="history-navigation">
                        <button id="prevPoemBtn" class="nav-btn" aria-label="Poema anterior">‚Üê Anterior</button>
                        <span id="historyPoemInfo" class="history-poem-info" aria-live="polite"></span>
                        <button id="nextPoemBtn" class="nav-btn" aria-label="Siguiente poema">Siguiente ‚Üí</button>
                    </div>
                    <div class="history-poem-display">
                        <h3 id="historyPoemTitle" class="history-poem-title"></h3>
                        <pre id="historyPoemBody" class="history-poem-body"></pre>
                    </div>
                    <div class="history-list">
                        <h4>Lista de Poemas:</h4>
                        <div id="poemsList" class="poems-list" role="listbox"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        /**
         * @section Configuraci√≥n y Constantes
         * Define constantes globales y datos est√°ticos, incluyendo poemas y configuraci√≥n de almacenamiento.
         */
        (() => {
                   const POEMS = [
            { "title": "Poema 1 ‚Äî 9 de octubre de 2025", "body": "Dios teji√≥ tu nombre en mi alma,\nmi oraci√≥n se volvi√≥ sonrisa,\ny mi amor floreci√≥ en tus manos." },
            { "title": "Poema 2 ‚Äî 10 de octubre de 2025", "body": "Como Ladybug protege Par√≠s,\nguardo cada latido tuyo,\nporque eres mi milagro divino." },
            { "title": "Poema 3 ‚Äî 11 de octubre de 2025", "body": "En tus ojos veo el cielo prometido,\nKarina, luz de mi despertar,\nDios nos uni√≥ con hilos de eternidad." },
            { "title": "Poema 4 ‚Äî 12 de octubre de 2025", "body": "Snoopy duerme sobre su casita,\nyo descanso en tu coraz√≥n,\nporque all√≠ est√° mi hogar verdadero." },
            { "title": "Poema 5 ‚Äî 13 de octubre de 2025", "body": "Tu risa es oraci√≥n que sube al cielo,\ntu abrazo es templo de paz,\ny tu amor es mi fe hecha canci√≥n." },
            { "title": "Poema 6 ‚Äî 14 de octubre de 2025", "body": "Cada ma√±ana le agradezco a Dios,\npor despertar a tu lado,\nporque eres el sue√±o que se hizo real." },
            { "title": "Poema 7 ‚Äî 15 de octubre de 2025", "body": "Como los miraculous del destino,\nnuestro amor tiene magia,\nbendecida por manos celestiales." },
            { "title": "Poema 8 ‚Äî 16 de octubre de 2025", "body": "Tu voz es melod√≠a sagrada,\nque calma tormentas en mi pecho,\ny me recuerda que no estoy solo." },
            { "title": "Poema 9 ‚Äî 17 de octubre de 2025", "body": "Snoopy escribe cartas al cielo,\nyo escribo promesas en tu piel,\ncon tinta de fe y devoci√≥n." },
            { "title": "Poema 10 ‚Äî 18 de octubre de 2025", "body": "Karina, eres mi respuesta divina,\na preguntas que nunca hice,\nporque Dios siempre supo lo que necesitaba." },
            { "title": "Poema 11 ‚Äî 19 de octubre de 2025", "body": "En tus manos encuentro consuelo,\nen tu mirada hallo prop√≥sito,\ny en tu amor descubro a Dios." },
            { "title": "Poema 12 ‚Äî 20 de octubre de 2025", "body": "Como Marinette guarda su identidad,\nguardo cada secreto tuyo,\nen el cofre sagrado de mi alma." },
            { "title": "Poema 13 ‚Äî 21 de octubre de 2025", "body": "Contigo aprend√≠ que el amor,\nno es solo sentimiento,\nes acto de fe que se renueva." },
            { "title": "Poema 14 ‚Äî 22 de octubre de 2025", "body": "Dios pint√≥ tu sonrisa en mis d√≠as,\ny desde entonces todo brilla,\ncon colores que antes no exist√≠an." },
            { "title": "Poema 15 ‚Äî 23 de octubre de 2025", "body": "Como Snoopy ama sus galletas,\nyo amo cada gesto tuyo,\nporque nutren mi esp√≠ritu hambriento." },
            { "title": "Poema 16 ‚Äî 24 de octubre de 2025", "body": "Tu nombre es mi oraci√≥n favorita,\nla repito en silencio y en voz alta,\nporque en ella habita la gracia." },
            { "title": "Poema 17 ‚Äî 25 de octubre de 2025", "body": "Karina, eres el jard√≠n donde Dios,\nplant√≥ las flores de mi alegr√≠a,\ny cada d√≠a florecen m√°s hermosas." },
            { "title": "Poema 18 ‚Äî 26 de octubre de 2025", "body": "En noches de duda y temor,\ntu luz me gu√≠a de regreso,\nal camino que Dios traz√≥ para nosotros." },
            { "title": "Poema 19 ‚Äî 27 de octubre de 2025", "body": "Como Ladybug y Chat Noir,\nsomos equipo perfecto,\nunidos por designio divino." },
            { "title": "Poema 20 ‚Äî 28 de octubre de 2025", "body": "Tu coraz√≥n late canciones,\nque mi alma aprendi√≥ a bailar,\nen la pista de nuestro amor eterno." },
            { "title": "Poema 21 ‚Äî 29 de octubre de 2025", "body": "Agradezco a Dios cada segundo,\nque me permite quererte,\nporque amarte es mi bendici√≥n mayor." },
            { "title": "Poema 22 ‚Äî 30 de octubre de 2025", "body": "Snoopy baila bajo la luna,\nyo bailo en tus brazos,\nporque all√≠ est√° mi para√≠so." },
            { "title": "Poema 23 ‚Äî 31 de octubre de 2025", "body": "Karina, eres milagro cotidiano,\nque renueva mi fe cada d√≠a,\ny me ense√±a a creer en lo imposible." },
            { "title": "Poema 24 ‚Äî 1 de noviembre de 2025", "body": "Tu amor es catedral de luz,\ndonde rezo cada ma√±ana,\ngratitud infinita por tenerte." },
            { "title": "Poema 25 ‚Äî 2 de noviembre de 2025", "body": "Como los miraculous protegen,\nmi amor te cuida en silencio,\ncon la fuerza que Dios me otorga." },
            { "title": "Poema 26 ‚Äî 3 de noviembre de 2025", "body": "En tu pecho encuentro refugio,\nen tu voz hallo paz,\ny en tus labios descubro el cielo." },
            { "title": "Poema 27 ‚Äî 4 de noviembre de 2025", "body": "Dios escribi√≥ nuestra historia,\ncon tinta de estrellas,\ny cada cap√≠tulo es m√°s hermoso." },
            { "title": "Poema 28 ‚Äî 5 de noviembre de 2025", "body": "Como Snoopy sue√±a en su techo,\nyo sue√±o contigo despierto,\nporque eres realidad que supera fantas√≠as." },
            { "title": "Poema 29 ‚Äî 6 de noviembre de 2025", "body": "Karina, tu existencia es prueba,\nde que Dios escucha oraciones,\nincluso las que no sab√≠a pronunciar." },
            { "title": "Poema 30 ‚Äî 7 de noviembre de 2025", "body": "Camino contigo por senderos,\nque antes parec√≠an oscuros,\npero tu luz los volvi√≥ radiantes." },
            { "title": "Poema 31 ‚Äî 8 de noviembre de 2025", "body": "Como Marinette crea con amor,\nDios cre√≥ tu alma perfecta,\npara complementar la m√≠a." },
            { "title": "Poema 32 ‚Äî 9 de noviembre de 2025", "body": "Tu risa es himno celestial,\nque alegra hasta los √°ngeles,\ny llena mi mundo de m√∫sica." },
            { "title": "Poema 33 ‚Äî 10 de noviembre de 2025", "body": "En cada oraci√≥n menciono tu nombre,\nporque eres respuesta y pregunta,\nel misterio hermoso de mi vida." },
            { "title": "Poema 34 ‚Äî 11 de noviembre de 2025", "body": "Snoopy abraza a Woodstock,\nyo abrazo tu esencia entera,\ncon ternura que nace del alma." },
            { "title": "Poema 35 ‚Äî 12 de noviembre de 2025", "body": "Karina, eres el verso favorito,\nque Dios escribi√≥ en mi historia,\ny que leo una y otra vez." },
            { "title": "Poema 36 ‚Äî 13 de noviembre de 2025", "body": "Tu amor me ense√±√≥ a perdonar,\na tener paciencia infinita,\ny a confiar en planes divinos." },
            { "title": "Poema 37 ‚Äî 14 de noviembre de 2025", "body": "Como Ladybug purifica akumas,\ntu amor purifica mis miedos,\ny los transforma en esperanza." },
            { "title": "Poema 38 ‚Äî 15 de noviembre de 2025", "body": "Dios pint√≥ el atardecer,\npero te dio a ti los colores,\nm√°s hermosos de su paleta." },
            { "title": "Poema 39 ‚Äî 16 de noviembre de 2025", "body": "En tus ojos leo promesas,\nque el tiempo nunca borrar√°,\nporque est√°n escritas en eternidad." },
            { "title": "Poema 40 ‚Äî 17 de noviembre de 2025", "body": "Como Snoopy vuela en sue√±os,\nvuelo contigo en realidad,\nhacia horizontes de amor infinito." },
            { "title": "Poema 41 ‚Äî 18 de noviembre de 2025", "body": "Karina, eres la plegaria cumplida,\nque ilumina cada amanecer,\ny bendice cada anochecer m√≠o." },
            { "title": "Poema 42 ‚Äî 19 de noviembre de 2025", "body": "Tu coraz√≥n es templo sagrado,\ndonde habita la paz,\ny donde aprendo a ser mejor." },
            { "title": "Poema 43 ‚Äî 20 de noviembre de 2025", "body": "Dios teji√≥ nuestros destinos,\ncon hilos de oro y luz,\ny cre√≥ obra maestra de amor." },
            { "title": "Poema 44 ‚Äî 21 de noviembre de 2025", "body": "Como los miraculous del destino,\nnuestra uni√≥n tiene prop√≥sito,\nque trasciende lo terrenal." },
            { "title": "Poema 45 ‚Äî 22 de noviembre de 2025", "body": "Tu voz es brisa celestial,\nque refresca mi esp√≠ritu cansado,\ny me recuerda que tengo hogar." },
            { "title": "Poema 46 ‚Äî 23 de noviembre de 2025", "body": "Snoopy espera con paciencia,\nyo espero cada momento contigo,\nporque valen la eternidad." },
            { "title": "Poema 47 ‚Äî 24 de noviembre de 2025", "body": "Karina, en ti descubr√≠,\nque el amor verdadero,\nes reflejo del amor de Dios." },
            { "title": "Poema 48 ‚Äî 25 de noviembre de 2025", "body": "Cada d√≠a a tu lado,\nes regalo divino que desenvuelvo,\ncon asombro y gratitud renovados." },
            { "title": "Poema 49 ‚Äî 26 de noviembre de 2025", "body": "Como Marinette protege Par√≠s,\nprotejo nuestro amor con fe,\ncontra todo viento y marea." },
            { "title": "Poema 50 ‚Äî 27 de noviembre de 2025", "body": "Tu sonrisa es amanecer,\nque rompe mi oscuridad,\ny anuncia d√≠as de gracia." },
            { "title": "Poema 51 ‚Äî 28 de noviembre de 2025", "body": "Dios susurra tu nombre en mi o√≠do,\ncuando necesito fortaleza,\nporque eres mi bendici√≥n constante." },
            { "title": "Poema 52 ‚Äî 29 de noviembre de 2025", "body": "Como Snoopy es feliz en simplicidad,\nsoy feliz en tu presencia pura,\nsin necesidad de m√°s nada." },
            { "title": "Poema 53 ‚Äî 30 de noviembre de 2025", "body": "Karina, eres el milagro,\nque no ped√≠ pero recib√≠,\ny que cuido como tesoro divino." },
            { "title": "Poema 54 ‚Äî 1 de diciembre de 2025", "body": "En tus brazos encuentro iglesia,\ndonde rezo sin palabras,\ny donde Dios me escucha siempre." },
            { "title": "Poema 55 ‚Äî 2 de diciembre de 2025", "body": "Tu amor es man√° celestial,\nque alimenta mi alma cada d√≠a,\ny me mantiene vivo de verdad." },
            { "title": "Poema 56 ‚Äî 3 de diciembre de 2025", "body": "Como Ladybug restaura orden,\ntu amor restaura mi esperanza,\ny me recuerda que todo es posible." },
            { "title": "Poema 57 ‚Äî 4 de diciembre de 2025", "body": "Dios me mostr√≥ el camino,\ny ese camino ten√≠a tu nombre,\nescrito en cada piedra del sendero." },
            { "title": "Poema 58 ‚Äî 5 de diciembre de 2025", "body": "Como Snoopy ama la vida,\namo cada segundo contigo,\nporque son instantes de eternidad." },
            { "title": "Poema 59 ‚Äî 6 de diciembre de 2025", "body": "Karina, tu esencia es poema,\nque Dios escribi√≥ con ternura,\ny que leo con devoci√≥n infinita." },
            { "title": "Poema 60 ‚Äî 7 de diciembre de 2025", "body": "En tu mirada encuentro respuestas,\na preguntas que mi alma hace,\nen silencio de madrugada." },
            { "title": "Poema 61 ‚Äî 8 de diciembre de 2025", "body": "Tu risa es campanada celestial,\nque anuncia momentos de alegr√≠a,\ny aleja toda sombra de mi vida." },
            { "title": "Poema 62 ‚Äî 9 de diciembre de 2025", "body": "Como los miraculous se complementan,\nt√∫ y yo somos mitades divinas,\nque Dios uni√≥ con amor perfecto." },
            { "title": "Poema 63 ‚Äî 10 de diciembre de 2025", "body": "Dios me dio manos para abrazarte,\nvoz para decirte te amo,\ny coraz√≥n para amarte eternamente." },
            { "title": "Poema 64 ‚Äî 11 de diciembre de 2025", "body": "Snoopy sue√±a aventuras,\nyo vivo aventuras a tu lado,\nporque contigo todo es extraordinario." },
            { "title": "Poema 65 ‚Äî 12 de diciembre de 2025", "body": "Karina, eres luz que nunca se apaga,\nfaro divino en mi tormenta,\ny puerto seguro de mi alma." },
            { "title": "Poema 66 ‚Äî 13 de diciembre de 2025", "body": "Tu amor es semilla bendita,\nque Dios plant√≥ en mi pecho,\ny que florece m√°s cada d√≠a." },
            { "title": "Poema 67 ‚Äî 14 de diciembre de 2025", "body": "Como Marinette cose con cuidado,\nDios cosi√≥ nuestras almas juntas,\ncon puntadas de amor eterno." },
            { "title": "Poema 68 ‚Äî 15 de diciembre de 2025", "body": "En tus palabras encuentro sabidur√≠a,\nen tu silencio hallo compa√±√≠a,\ny en tu amor descubro prop√≥sito." },
            { "title": "Poema 69 ‚Äî 16 de diciembre de 2025", "body": "Dios pint√≥ tu sonrisa,\ncon los colores del para√≠so,\ny la coloc√≥ en mi horizonte." },
            { "title": "Poema 70 ‚Äî 17 de diciembre de 2025", "body": "Como Snoopy baila de alegr√≠a,\nmi coraz√≥n baila cuando te veo,\nal ritmo de la gracia divina." },
            { "title": "Poema 71 ‚Äî 18 de diciembre de 2025", "body": "Karina, eres el s√≠ de Dios,\na todas mis oraciones calladas,\ny la respuesta que supera mis sue√±os." },
            { "title": "Poema 72 ‚Äî 19 de diciembre de 2025", "body": "Tu coraz√≥n es jard√≠n celestial,\ndonde crecen flores de esperanza,\ny donde mi alma encuentra descanso." },
            { "title": "Poema 73 ‚Äî 20 de diciembre de 2025", "body": "Como Ladybug transforma lo oscuro,\ntu amor transforma mis heridas,\nen cicatrices llenas de luz." },
            { "title": "Poema 74 ‚Äî 21 de diciembre de 2025", "body": "Dios susurra promesas en el viento,\ny todas llevan tu nombre grabado,\nporque eres su regalo para m√≠." },
            { "title": "Poema 75 ‚Äî 22 de diciembre de 2025", "body": "En tus ojos veo mi futuro,\nescrito con tinta de estrellas,\ny sellado con amor divino." },
            { "title": "Poema 76 ‚Äî 23 de diciembre de 2025", "body": "Como Snoopy ama a Charlie Brown,\nte amo con lealtad eterna,\nque nace del alma y no se acaba." },
            { "title": "Poema 77 ‚Äî 24 de diciembre de 2025", "body": "Karina, eres villancico celestial,\nque suena en mi coraz√≥n,\nanunciando paz y amor eterno." },
            { "title": "Poema 78 ‚Äî 25 de diciembre de 2025", "body": "Hoy celebro tu amor como regalo,\nm√°s precioso que cualquier tesoro,\nporque es reflejo del amor de Dios." },
            { "title": "Poema 79 ‚Äî 26 de diciembre de 2025", "body": "Tu voz es melod√≠a sagrada,\nque calma tempestades en mi mente,\ny trae serenidad a mi esp√≠ritu." },
            { "title": "Poema 80 ‚Äî 27 de diciembre de 2025", "body": "Como los miraculous eligen portadores,\nDios te eligi√≥ para mi vida,\ny yo te elijo cada d√≠a tambi√©n." },
            { "title": "Poema 81 ‚Äî 28 de diciembre de 2025", "body": "Dios me ense√±√≥ a amar,\npero t√∫ me ense√±aste c√≥mo,\ncon ejemplo vivo de tu coraz√≥n." },
            { "title": "Poema 82 ‚Äî 29 de diciembre de 2025", "body": "Snoopy escribe su novela,\nyo escribo nuestra historia,\ncon cap√≠tulos de fe y devoci√≥n." },
            { "title": "Poema 83 ‚Äî 30 de diciembre de 2025", "body": "Karina, eres el milagro cotidiano,\nque me recuerda que Dios existe,\ny que su amor es real y tangible." },
            { "title": "Poema 84 ‚Äî 31 de diciembre de 2025", "body": "Al cerrar este a√±o te doy gracias,\npor cada risa, cada abrazo,\ny por ser mi compa√±era de vida." },
            { "title": "Poema 85 ‚Äî 1 de enero de 2026", "body": "Nuevo a√±o, mismo amor infinito,\nque crece y se renueva,\ncon la bendici√≥n de Dios siempre." },
            { "title": "Poema 86 ‚Äî 2 de enero de 2026", "body": "Como Marinette enfrenta desaf√≠os,\nenfrentamos juntos el futuro,\ncon fe como escudo y amor como espada." },
            { "title": "Poema 87 ‚Äî 3 de enero de 2026", "body": "Tu sonrisa ilumina mis ma√±anas,\ntu abrazo calienta mis noches,\ny tu amor sostiene mis d√≠as." },
            { "title": "Poema 88 ‚Äî 4 de enero de 2026", "body": "Dios te dio a m√≠ como bendici√≥n,\ny me dio a ti como promesa,\nde amarte hasta el √∫ltimo suspiro." },
            { "title": "Poema 89 ‚Äî 5 de enero de 2026", "body": "Como Snoopy es fiel a su esencia,\nsoy fiel a este amor sagrado,\nque nace del cielo y vive en la tierra." },
            { "title": "Poema 90 ‚Äî 6 de enero de 2026", "body": "Karina, eres estrella que gu√≠a,\nmi camino en noches oscuras,\ny me recuerda que nunca estoy perdido." },
            { "title": "Poema 91 ‚Äî 7 de enero de 2026", "body": "En tus manos deposito mis miedos,\nen tu coraz√≥n encuentro valent√≠a,\ny en tu amor hallo mi verdad." },
            { "title": "Poema 92 ‚Äî 8 de enero de 2026", "body": "Como Ladybug restaura Par√≠s,\ntu amor restaura mi mundo,\ny lo llena de colores divinos." },
            { "title": "Poema 93 ‚Äî 9 de enero de 2026", "body": "Dios escribi√≥ tu nombre en mi destino,\ncon letras que nunca se borran,\nporque son eternas como su amor." },
            { "title": "Poema 94 ‚Äî 10 de enero de 2026", "body": "Tu risa es sacramento de alegr√≠a,\nque celebro cada d√≠a,\ncon gratitud infinita al cielo." },
            { "title": "Poema 95 ‚Äî 11 de enero de 2026", "body": "Como Snoopy encuentra felicidad,\nen cosas simples y hermosas,\nhallo mi felicidad completa en ti." },
            { "title": "Poema 96 ‚Äî 12 de enero de 2026", "body": "Karina, eres el verso final,\ndel poema que Dios comenz√≥,\ncuando decidi√≥ que yo existiera." },
            { "title": "Poema 97 ‚Äî 13 de enero de 2026", "body": "Tu amor es c√°liz de gracia,\ndel que bebo cada ma√±ana,\ny que nutre mi alma sedienta." },
            { "title": "Poema 98 ‚Äî 14 de enero de 2026", "body": "Como los miraculous protegen,\nprotejo cada momento contigo,\nen el altar sagrado de mi memoria." },
            { "title": "Poema 99 ‚Äî 15 de enero de 2026", "body": "Dios me dio vida para vivir,\npero t√∫ me diste razones,\npara celebrar cada latido del coraz√≥n." },
            { "title": "Poema 100 ‚Äî 16 de enero de 2026", "body": "Karina, al llegar a cien d√≠as,\ns√© que esto es solo el comienzo,\nde nuestro amor infinito y eterno." }
        ];
            const TOTAL_POEMS = POEMS.length;
            const CORRECT_PASSWORD = 'miamor';
            const STORAGE_KEY = {
                START_DATE: 'poem_start_date',
                CURRENT_INDEX: 'poem_current_index'
            };
            const TIMEZONE = 'America/Bogota';
            const MAX_HEARTS = 20;

            /**
             * @section Estado en Memoria
             * Fallback para localStorage si est√° desactivado o lleno.
             */
            let inMemoryStorage = {};

            /**
             * @section Utilidades de Almacenamiento
             * Manejo seguro de localStorage con fallback en memoria.
             */
            const storage = {
                set(key, value) {
                    try {
                        if (typeof Storage !== 'undefined') {
                            localStorage.setItem(key, value);
                        } else {
                            inMemoryStorage[key] = value;
                        }
                    } catch (e) {
                        console.warn('localStorage lleno o desactivado, usando memoria:', e);
                        inMemoryStorage[key] = value;
                    }
                },
                get(key) {
                    try {
                        if (typeof Storage !== 'undefined') {
                            return localStorage.getItem(key);
                        }
                        return inMemoryStorage[key] || null;
                    } catch (e) {
                        console.warn('Error accediendo a localStorage, usando memoria:', e);
                        return inMemoryStorage[key] || null;
                    }
                },
                remove(key) {
                    try {
                        if (typeof Storage !== 'undefined') {
                            localStorage.removeItem(key);
                        }
                        delete inMemoryStorage[key];
                    } catch (e) {
                        console.warn('Error eliminando de localStorage:', e);
                        delete inMemoryStorage[key];
                    }
                }
            };

            /**
             * @section Utilidades de Fecha
             * Funciones para manejo de fechas en la zona horaria de Bogot√°.
             */
            const getDateString = (date = new Date()) => new Intl.DateTimeFormat('sv-SE', { timeZone: TIMEZONE }).format(date);

            const createBogotaMidnightTimestamp = (dateStr) => {
                // Construye timestamp para medianoche Bogot√° (-05:00).
                // Usa formato ISO con offset expl√≠cito para evitar problemas de zona horaria.
                const isoWithOffset = `${dateStr}T00:00:00-05:00`;
                return new Date(isoWithOffset).getTime();
            };

            const getBogotaFormattedDate = (date = new Date()) => {
                return new Intl.DateTimeFormat('es-CO', { year: 'numeric', month: 'long', day: 'numeric', timeZone: TIMEZONE }).format(date);
            };

            const getBogotaFormattedTime = (date = new Date()) => {
                return new Intl.DateTimeFormat('es-CO', {
                    hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: TIMEZONE
                }).format(date);
            };

            /**
             * @section Gesti√≥n de Poemas
             * L√≥gica para calcular y mostrar el poema diario.
             */
            const initializeStartDate = () => {
                if (!storage.get(STORAGE_KEY.START_DATE)) {
                    const fixedStartDate = '2025-10-09'; // Fecha inicial fija
                    const ts = createBogotaMidnightTimestamp(fixedStartDate);
                    storage.set(STORAGE_KEY.START_DATE, ts.toString());
                    storage.set(STORAGE_KEY.CURRENT_INDEX, '0');
                }
            };

            const getCurrentPoemIndex = (now = new Date()) => {
                const startDateTs = parseInt(storage.get(STORAGE_KEY.START_DATE), 10);
                if (Number.isNaN(startDateTs)) {
                    console.error('Fecha de inicio inv√°lida.');
                    return 0;
                }
                const diffMs = now.getTime() - startDateTs;
                const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                return Math.max(0, Math.min(diffDays, TOTAL_POEMS - 1));
            };

            const loadDailyPoem = () => {
                const poemCard = document.getElementById('poemCard');
                if (!document.getElementById('currentPoemTitle') || !document.getElementById('currentPoemBody')) {
                    console.error('Contenedores de poema no encontrados.');
                    showError('Error: Contenedores de poema no encontrados.');
                    return;
                }

                initializeStartDate();
                const now = new Date();
                const currentIndex = getCurrentPoemIndex(now);
                storage.set(STORAGE_KEY.CURRENT_INDEX, currentIndex.toString());

                if (currentIndex >= TOTAL_POEMS) {
                    document.getElementById('currentPoemTitle').textContent = "¬°Hemos completado nuestro viaje de 100 poemas!";
                    document.getElementById('currentPoemBody').textContent = "Pero nuestra historia de amor apenas comienza.\nCada d√≠a a tu lado es un nuevo poema escrito en mi coraz√≥n.\nTe amo infinitamente.";
                    document.getElementById('poemNumber').textContent = `${TOTAL_POEMS} de ${TOTAL_POEMS}`;
                } else {
                    const poem = POEMS[currentIndex] || { title: 'Poema no disponible', body: 'No se encontr√≥ el poema para hoy.' };
                    document.getElementById('currentPoemTitle').textContent = poem.title;
                    document.getElementById('currentPoemBody').textContent = poem.body;
                    document.getElementById('poemNumber').textContent = `${currentIndex + 1} de ${TOTAL_POEMS}`;
                }
                document.getElementById('poemDate').textContent = getBogotaFormattedDate(now);

                // A√±ade animaci√≥n de fade al cargar nuevo poema
                poemCard.classList.remove('fade-in');
                void poemCard.offsetWidth; // Forzar reflow para reiniciar animaci√≥n
                poemCard.classList.add('fade-in');

                if (document.getElementById('poemsHistoryModal').classList.contains('visible')) {
                    generatePoemsList();
                    updateHistoryDisplay(currentIndex);
                }
            };

            const showError = (message) => {
                document.getElementById('currentPoemTitle').textContent = 'Oops, algo sali√≥ mal';
                document.getElementById('currentPoemBody').textContent = message;
                document.getElementById('poemNumber').textContent = '';
                document.getElementById('poemDate').textContent = '';
            };

            /**
             * @section Reloj y Sincronizaci√≥n
             * Manejo del reloj en tiempo real y detecci√≥n de cambio de d√≠a.
             */
            let lastTimeStr = '';
            let lastDateStr = '';
            let appInterval = null;

            const updateClockAndPoem = () => {
                const now = new Date();
                const currentTimeStr = getBogotaFormattedTime(now);
                const currentDateStr = getDateString(now);

                // Actualizar DOM solo si el tiempo cambi√≥
                if (currentTimeStr !== lastTimeStr) {
                    document.getElementById('currentTime').textContent = currentTimeStr;
                    lastTimeStr = currentTimeStr;
                }

                // Actualizar poema si cambi√≥ el d√≠a
                if (currentDateStr !== lastDateStr) {
                    loadDailyPoem();
                    lastDateStr = currentDateStr;
                }

                // Actualizar contador
                updatePoemCounter(now);
            };

            const startRealTimeSystem = () => {
                if (appInterval) clearInterval(appInterval);
                lastDateStr = getDateString();
                updateClockAndPoem();
                appInterval = setInterval(updateClockAndPoem, 60000); // Revisar cada minuto
            };

            const updatePoemCounter = (now = new Date()) => {
                const startDateTs = parseInt(storage.get(STORAGE_KEY.START_DATE), 10);
                if (Number.isNaN(startDateTs)) {
                    document.getElementById('poemCounter').textContent = '';
                    return;
                }

                const diffMs = now.getTime() - startDateTs;
                const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                if (diffDays >= TOTAL_POEMS) {
                    document.getElementById('poemCounter').textContent = "¬°Misi√≥n cumplida! Nuestro amor es eterno.";
                    return;
                }

                const nextPoemTs = startDateTs + (diffDays + 1) * 24 * 60 * 60 * 1000;
                let timeLeftMs = nextPoemTs - now.getTime();
                if (timeLeftMs < 0) timeLeftMs = 0;

                const hours = Math.floor(timeLeftMs / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeftMs % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeftMs % (1000 * 60)) / 1000);

                document.getElementById('poemCounter').innerHTML = `D√≠a ${diffDays + 1}. Quedan <strong>${hours}h ${minutes}m ${seconds}s</strong> para el poema ${diffDays + 2}.`;
            };

            /**
             * @section Animaciones de Corazones
             * Gesti√≥n de corazones flotantes con l√≠mite m√°ximo y limpieza.
             */
            let heartCount = 0;
            let heartInterval = null;

            const startHeartAnimation = () => {
                const HEART_SYMBOLS = ['‚ù§Ô∏è', 'üíñ', '‚ú®', 'üåπ'];
                const createHeart = () => {
                    if (heartCount >= MAX_HEARTS) return;
                    const heart = document.createElement('div');
                    heart.innerHTML = HEART_SYMBOLS[Math.floor(Math.random() * HEART_SYMBOLS.length)];
                    heart.classList.add('floating-heart');
                    heart.style.left = `${Math.random() * 100}vw`;
                    heart.style.fontSize = `${Math.random() * 1.5 + 0.8}rem`;
                    heart.style.animationDuration = `${Math.random() * 10 + 10}s`;
                    heart.style.animationDelay = `-${Math.random() * 5}s`;
                    document.getElementById('heartsContainer').appendChild(heart);
                    heartCount++;
                    heart.addEventListener('animationend', () => {
                        heart.remove();
                        heartCount--;
                    });
                };

                if (heartInterval) clearInterval(heartInterval);
                for (let i = 0; i < Math.min(12, MAX_HEARTS); i++) createHeart();
                heartInterval = setInterval(createHeart, 1200);
            };

            /**
             * @section Gesti√≥n del Modal de Historial
             * L√≥gica para mostrar y navegar por poemas pasados.
             */
            let currentHistoryIndex = 0;

            const openPoemsHistory = () => {
                const modal = document.getElementById('poemsHistoryModal');
                modal.classList.add('visible');
                modal.setAttribute('aria-hidden', 'false');
                currentHistoryIndex = parseInt(storage.get(STORAGE_KEY.CURRENT_INDEX), 10) || 0;
                generatePoemsList();
                updateHistoryDisplay(currentHistoryIndex);
                const firstFocusable = modal.querySelector('button, [tabindex]:not([tabindex="-1"])');
                if (firstFocusable) firstFocusable.focus();
            };

            const closePoemsHistory = () => {
                const modal = document.getElementById('poemsHistoryModal');
                modal.classList.remove('visible');
                modal.setAttribute('aria-hidden', 'true');
                document.getElementById('viewHistoryBtn').focus();
            };

            const generatePoemsList = () => {
                const poemsList = document.getElementById('poemsList');
                poemsList.innerHTML = '';
                const maxIndex = Math.min(parseInt(storage.get(STORAGE_KEY.CURRENT_INDEX), 10) || 0, TOTAL_POEMS - 1);
                for (let i = 0; i <= maxIndex; i++) {
                    const poem = POEMS[i] || { title: `Poema ${i + 1}`, body: '' };
                    const poemItem = document.createElement('div');
                    poemItem.className = 'poem-item';
                    poemItem.setAttribute('role', 'option');
                    poemItem.setAttribute('tabindex', '0');
                    poemItem.dataset.index = i;
                    poemItem.innerHTML = `<div class="poem-item-title">${poem.title}</div><div class="poem-item-preview">${(poem.body || '').substring(0, 50)}...</div>`;
                    poemItem.addEventListener('click', () => {
                        currentHistoryIndex = i;
                        updateHistoryDisplay(i);
                    });
                    poemItem.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            currentHistoryIndex = i;
                            updateHistoryDisplay(i);
                        }
                    });
                    poemsList.appendChild(poemItem);
                }
                updatePoemsListSelection(currentHistoryIndex);
            };

            const updatePoemsListSelection = (selectedIndex) => {
                document.getElementById('poemsList').querySelectorAll('.poem-item').forEach((item) => {
                    const idx = parseInt(item.dataset.index, 10);
                    const isSelected = idx === selectedIndex;
                    item.classList.toggle('current', isSelected);
                    item.setAttribute('aria-selected', isSelected ? 'true' : 'false');
                    if (isSelected) item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
            };

            const updateHistoryDisplay = (index) => {
                currentHistoryIndex = index;
                const poem = POEMS[index] || { title: `Poema ${index + 1}`, body: 'No disponible' };
                document.getElementById('historyPoemTitle').textContent = poem.title;
                document.getElementById('historyPoemBody').textContent = poem.body;
                document.getElementById('historyPoemInfo').textContent = `Poema ${index + 1} de ${parseInt(storage.get(STORAGE_KEY.CURRENT_INDEX), 10) + 1}`;
                document.getElementById('prevPoemBtn').disabled = index <= 0;
                document.getElementById('nextPoemBtn').disabled = index >= parseInt(storage.get(STORAGE_KEY.CURRENT_INDEX), 10);
                updatePoemsListSelection(index);
            };

            /**
             * @section Reseteo de Progreso
             * Permite reiniciar el progreso del usuario.
             */
            const resetProgress = () => {
                storage.remove(STORAGE_KEY.START_DATE);
                storage.remove(STORAGE_KEY.CURRENT_INDEX);
                initializeStartDate();
                loadDailyPoem();
            };

            /**
             * @section Inicializaci√≥n y Eventos
             * Configuraci√≥n inicial y manejo de eventos.
             */
            const unlockPage = () => {
                document.getElementById('errorMessage').textContent = '¬°Correcto! Te amo ‚ù§Ô∏è';
                const lockScreen = document.getElementById('lockScreen');
                lockScreen.classList.add('fade-out');
                setTimeout(() => {
                    lockScreen.style.display = 'none';
                    const mainContent = document.getElementById('mainContent');
                    mainContent.style.display = 'block';
                    setTimeout(() => mainContent.classList.add('visible'), 50);
                    initializeAndStartApp();
                }, 800);
            };

            const initializeAndStartApp = () => {
                try {
                    initializeStartDate();
                    loadDailyPoem();
                    startRealTimeSystem();
                    startHeartAnimation();
                } catch (err) {
                    console.error('Error inicializando app:', err);
                    showError('Hubo un error al cargar el contenido. Por favor recarga la p√°gina.');
                }
            };

            document.getElementById('unlockForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const inputPassword = document.getElementById('passwordInput').value.trim().toLowerCase();
                if (inputPassword === CORRECT_PASSWORD) {
                    unlockPage();
                } else {
                    document.getElementById('errorMessage').textContent = 'Clave incorrecta. Pista: es lo que eres para m√≠.';
                    document.getElementById('passwordInput').value = '';
                    document.getElementById('passwordInput').focus();
                }
            });

            document.getElementById('viewHistoryBtn').addEventListener('click', openPoemsHistory);
            document.getElementById('closeHistoryBtn').addEventListener('click', closePoemsHistory);
            document.getElementById('prevPoemBtn').addEventListener('click', () => {
                if (currentHistoryIndex > 0) {
                    currentHistoryIndex--;
                    updateHistoryDisplay(currentHistoryIndex);
                }
            });
            document.getElementById('nextPoemBtn').addEventListener('click', () => {
                if (currentHistoryIndex < parseInt(storage.get(STORAGE_KEY.CURRENT_INDEX), 10)) {
                    currentHistoryIndex++;
                    updateHistoryDisplay(currentHistoryIndex);
                }
            });
            document.getElementById('poemsHistoryModal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('poemsHistoryModal')) closePoemsHistory();
            });
            document.getElementById('resetProgressBtn').addEventListener('click', resetProgress);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && document.getElementById('poemsHistoryModal').classList.contains('visible')) {
                    closePoemsHistory();
                }
                if (e.key === 'Tab' && document.getElementById('poemsHistoryModal').classList.contains('visible')) {
                    const focusable = document.getElementById('poemsHistoryModal').querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
                    const first = focusable[0];
                    const last = focusable[focusable.length - 1];
                    if (e.shiftKey && document.activeElement === first) {
                        last.focus();
                        e.preventDefault();
                    } else if (!e.shiftKey && document.activeElement === last) {
                        first.focus();
                        e.preventDefault();
                    }
                }
            });
        })();
    </script>
</body>
</html>